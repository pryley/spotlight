/**
 * Spotlight.js v0.7.8
 * Copyright 2019-2021 Nextapps GmbH
 * Author: Thomas Wilkerling
 * Licence: Apache-2.0
 * https://github.com/nextapps-de/spotlight
 */
(function(){'use strict';Object.assign||(Object.assign=function(a,b){for(var c=Object.keys(b),e=0,f;e<c.length;e++)f=c[e],a[f]=b[f];return a});Element.prototype.closest||(Element.prototype.closest=function(a){a=a.substring(1);for(var b=this;b&&1===b.nodeType;){if(b.classList.contains(a))return b;b=b.parentElement}return null});function d(a,b,c){a.classList[c?"add":"remove"](b)}function g(a,b,c){c=""+c;a["_s_"+b]!==c&&(a.style.setProperty(b,c),a["_s_"+b]=c)}var aa=0;function ba(a,b){b&&(g(a,"transition","none"),b());aa||(aa=a.clientTop&&0);b&&g(a,"transition","")}function h(a,b,c,e){ca(!0,a,b,c,e)}function ca(a,b,c,e,f){b[(a?"add":"remove")+"EventListener"](c,e,f||!1===f?f:!0)}function da(a,b){a.stopPropagation();b&&a.preventDefault()}function k(a,b){g(a,"display",b?"":"none")}
function l(a,b){g(a,"visibility",b?"":"hidden")}function m(a,b){g(a,"transition",b?"":"none")};var n="info theme download play page close autofit zoom-in zoom-out prev next fullscreen".split(" "),ea={info:1,page:1,close:1,autofit:1,"zoom-in":1,"zoom-out":1,prev:1,next:1,fullscreen:1};var p=document.createElement("div");p.id="spotlight";p.innerHTML="<div class=spl-spinner></div><div class=spl-track><div class=spl-scene><div class=spl-pane></div></div></div><div class=spl-header><div class=spl-page> </div></div><div class=spl-progress></div><div class=spl-footer><div class=spl-title> </div><div class=spl-description> </div><div class=spl-button> </div></div><div class=spl-prev></div><div class=spl-next></div>";var fa={},ha=document.createElement("video");function ia(a,b,c,e){if("node"!==e)for(var f=Object.keys(c),A=0,w;A<f.length;A++)if(w=f[A],3<w.length&&0===w.indexOf("src"))if("video"===e){var F=fa[w];if(F){if(0<F){var Ea=c[w];break}}else if(ha.canPlayType("video/"+w.substring(3).replace("-","").toLowerCase())){fa[w]=1;Ea=c[w];break}else fa[w]=-1}else if(F=parseInt(w.substring(4),10))if(F=Math.abs(b-F),!jb||F<jb){var jb=F;Ea=c[w]}return Ea||c.src||c.href||a.src||a.href};var q={},ja=navigator.connection,ka=window.devicePixelRatio||1,r,t,la,ma,u,na,oa,pa,v,qa,ra,sa,x,y,z,B,C,D,ta,E,G,ua,va,wa,xa,ya,za,H,Aa,Ba,Ca,Da,I,Fa,Ga,Ha,Ia,J,K,L,Ja,M,Ka=document.createElement("img"),La,Ma,N,Na=0,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,O,Wa,P,Q,R,S,Xa,T,Ya;h(document,"click",Za);
function $a(){function a(c){return q[c]=(p||document).getElementsByClassName("spl-"+c)[0]}if(!K){K=document.body;La=a("scene");Ma=a("header");N=a("footer");Oa=a("title");Pa=a("description");Qa=a("button");Ra=a("prev");Sa=a("next");Ua=a("page");O=a("progress");Wa=a("spinner");Ja=[a("pane")];U("close",ab);K[T="requestFullscreen"]||K[T="msRequestFullscreen"]||K[T="webkitRequestFullscreen"]||K[T="mozRequestFullscreen"]||(T="");T?(Ya=T.replace("request","exit").replace("mozRequest","mozCancel").replace("Request",
"Exit"),Ta=U("fullscreen",bb)):n.pop();U("info",cb);U("autofit",V);U("zoom-in",db);U("zoom-out",eb);U("theme",fb);Va=U("play",W);U("download",gb);h(Ra,"click",hb);h(Sa,"click",ib);var b=a("track");h(b,"mousedown",kb);h(b,"mousemove",lb);h(b,"mouseleave",mb);h(b,"mouseup",mb);h(b,"touchstart",kb,{passive:!1});h(b,"touchmove",lb,{passive:!0});h(b,"touchend",mb);h(Qa,"click",function(){Da?Da(z,D):Ca&&(location.href=Ca)})}}
function U(a,b){var c=document.createElement("div");c.className="spl-"+a;h(c,"click",b);Ma.appendChild(c);return q[a]=c}function Za(a){var b=a.target.closest(".spotlight");if(b){da(a,!0);a=b.closest(".spotlight-group");C=(a||document).getElementsByClassName("spotlight");for(var c=0;c<C.length;c++)if(C[c]===b){E=a&&a.dataset;nb(c+1);break}}}
function nb(a){if(B=C.length){K||$a();va&&va(a);for(var b=Ja[0],c=b.parentNode,e=Ja.length;e<B;e++){var f=b.cloneNode(!1);g(f,"left",100*e+"%");c.appendChild(f);Ja[e]=f}L||(K.appendChild(p),ob());z=a||1;m(La);pb(!0);T&&qb();m(p,!0);d(K,"hide-scrollbars",!0);d(p,"show",!0);rb(!0);ob();X();H&&W(!0,!0)}}function Y(a,b){a=D[a];return"undefined"!==typeof a?(a=""+a,"false"!==a&&(a||b)):b}function sb(a){a?ba(M,sb):(m(La,Ia),g(M,"opacity",Ha?0:1),tb(Ga&&.8),J&&d(M,J,!0))}
function ub(a){L=Ja[a-1];M=L.firstChild;z=a;if(M)x&&V(),ya&&d(M,ya,!0),sb(!0),J&&d(M,J),Ha&&g(M,"opacity",1),Ga&&g(M,"transform",""),g(M,"visibility","visible"),Q&&(Ka.src=Q),H&&vb(R);else{var b=P.media,c=Y("spinner",!0);if("video"===b)wb(c,!0),M=document.createElement("video"),M.onloadedmetadata=function(){M===this&&(M.onerror=null,M.width=M.videoWidth,M.height=M.videoHeight,xb(),wb(c),ub(a))},M.poster=D.poster,M.preload=Ba?"auto":"metadata",M.controls=Y("controls",!0),M.autoplay=D.autoplay,M.h=
Y("inline"),M.muted=Y("muted"),M.src=P.src,L.appendChild(M);else{if("node"===b){M=P.src;"string"===typeof M&&(M=document.querySelector(M));M&&(M.g||(M.g=M.parentNode),xb(),L.appendChild(M),ub(a));return}wb(c,!0);M=document.createElement("img");M.onload=function(){M===this&&(M.onerror=null,wb(c),ub(a),xb())};M.src=P.src;L.appendChild(M)}M&&(c||g(M,"visibility","visible"),M.onerror=function(){M===this&&(yb(M),d(Wa,"error",!0),wb(c))})}}function wb(a,b){a&&d(Wa,"spin",b)}
function zb(){return document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement}function Ab(){ob();M&&xb();if(T){var a=zb();d(Ta,"on",a);a||qb()}}function qb(){!1!==Y("fullscreen",ea.fullscreen)&&k(Ta,0<screen.availHeight-window.innerHeight)}function ob(){u=p.clientWidth;na=p.clientHeight}function xb(){oa=M.clientWidth;pa=M.clientHeight}function tb(a){g(M,"transform","translate(-50%, -50%) scale("+(a||v)+")")}
function Z(a,b){g(L,"transform",a||b?"translate("+a+"px, "+b+"px)":"")}function Bb(a,b,c){b?ba(La,function(){Bb(a,!1,c)}):g(La,"transform","translateX("+(100*-a+(c||0))+"%)")}function rb(a){ca(a,window,"keydown",Cb);ca(a,window,"wheel",Db);ca(a,window,"resize",Ab)}
function Cb(a){if(L){var b=!1!==D["zoom-in"];switch(a.keyCode){case 8:b&&V();break;case 27:ab();break;case 32:H&&W();break;case 37:hb();break;case 39:ib();break;case 38:case 107:case 187:b&&db();break;case 40:case 109:case 189:b&&eb();break;case 73:cb()}}}function Db(a){L&&!1!==D["zoom-in"]&&(a=a.deltaY,0>.5*(0>a?1:a?-1:0)?eb():db())}function W(a,b){("boolean"===typeof a?a:!R)===!R&&(R=R?clearTimeout(R):1,d(Va,"on",R),b||vb(R))}
function vb(a){ua&&(ba(O,function(){g(O,"transition-duration","");g(O,"transform","")}),a&&(g(O,"transition-duration",Fa+"s"),g(O,"transform","translateX(0)")));a&&(R=setTimeout(ib,1E3*Fa))}function X(){za&&(Xa=Date.now()+2950,S||(d(p,"menu",!0),Eb(3E3)))}function Eb(a){S=setTimeout(function(){var b=Date.now();b>=Xa?(d(p,"menu"),S=0):Eb(Xa-b)},a)}function Fb(a){"boolean"===typeof a&&(S=a?S:0);S?(S=clearTimeout(S),d(p,"menu")):X()}
function kb(a){da(a,!0);qa=!0;ra=!1;var b=a.touches;b&&(b=b[0])&&(a=b);sa=oa*v<=u;la=a.pageX;ma=a.pageY;m(L)}function mb(a){da(a);if(qa){if(ra){if(sa&&ra){var b=(a=r<-(u/7)&&(z<B||G))||r>u/7&&(1<z||G);if(a||b)Bb(z-1,!0,r/u*100),a&&ib()||b&&hb();r=0;Z()}m(L,!0)}else Fb();qa=!1}}function lb(a){da(a);if(qa){var b=a.touches;b&&(b=b[0])&&(a=b);b=(oa*v-u)/2;r-=la-(la=a.pageX);sa||(r>b?r=b:r<-b&&(r=-b),pa*v>na&&(b=(pa*v-na)/2,t-=ma-(ma=a.pageY),t>b?t=b:t<-b&&(t=-b)));ra=!0;Z(r,t)}else X()}
function bb(a){var b=zb();if("boolean"!==typeof a||a!==!!b)if(b)document[Ya]();else p[T]()}function fb(a){"string"!==typeof a&&(a=y?"":Aa||"white");y!==a&&(y&&d(p,y),a&&d(p,a,!0),y=a)}function V(a){"boolean"===typeof a&&(x=!a);x=1===v&&!x;d(M,"autofit",x);g(M,"transform","");v=1;t=r=0;xb();m(L);Z()}function db(){var a=v/.65;50>=a&&(x&&V(),r/=.65,t/=.65,Z(r,t),Gb(a))}function eb(){var a=.65*v;x&&V();1<=a&&(1===a?r=t=0:(r*=.65,t*=.65),Z(r,t),Gb(a))}function Gb(a){v=a||1;tb()}
function cb(){Na=!Na;l(N,Na)}function gb(){var a=K,b=document.createElement("a"),c=M.src;b.href=c;b.download=c.substring(c.lastIndexOf("/")+1);a.appendChild(b);b.click();a.removeChild(b)}function ab(){L&&(setTimeout(function(){K.removeChild(p);L=M=P=D=E=C=va=wa=xa=Da=null},200),d(K,"hide-scrollbars"),d(p,"show"),bb(!1),rb(),Q&&(Ka.src=""),R&&W(),M&&yb(M),S&&(S=clearTimeout(S)),y&&fb(),I&&d(p,I),xa&&xa())}
function yb(a){if(a.g)a.g.appendChild(a),a.g=null;else{var b=a.parentNode;b&&b.removeChild(a);a.src=a.onerror=""}}function hb(a){a&&X();if(1<B){if(1<z)return Hb(z-1);if(G)return Bb(B,!0),Hb(B)}}function ib(a){a&&X();if(1<B){if(z<B)return Hb(z+1);if(G)return Bb(-1,!0),Hb(1);R&&W()}}function Hb(a){if(a!==z){R?(clearTimeout(R),vb()):X();var b=a>z;z=a;pb(b);return!0}}
function Ib(a){var b=C[z-1],c=b;D={};E&&Object.assign(D,E);Object.assign(D,c.dataset||c);ta=D.media;Da=D.onclick;Aa=D.theme;I=D["class"];za=Y("autohide",!0);G=Y("infinite");ua=Y("progress",!0);H=Y("autoslide");Ba=Y("preload",!0);Ca=D.buttonHref;Fa=H&&parseFloat(H)||7;y||Aa&&fb(Aa);I&&d(p,I,!0);I&&ba(p);if(c=D.control){c="string"===typeof c?c.split(","):c;for(var e=0;e<n.length;e++)D[n[e]]=!1;for(e=0;e<c.length;e++){var f=c[e].trim();"zoom"===f?D["zoom-in"]=D["zoom-out"]=!0:D[f]=!0}}c=D.animation;
Ga=Ha=Ia=!c;J=!1;if(c)for(c="string"===typeof c?c.split(","):c,e=0;e<c.length;e++)f=c[e].trim(),"scale"===f?Ga=!0:"fade"===f?Ha=!0:"slide"===f?Ia=!0:f&&(J=f);ya=D.fit;e=ja&&ja.downlink;c=Math.max(na,u)*ka;e&&1200*e<c&&(c=1200*e);var A;P={media:ta,src:ia(b,c,D,ta),title:Y("title",b.alt||b.title||(A=b.firstElementChild)&&(A.alt||A.title))};Q&&(Ka.src=Q="");Ba&&a&&(b=C[z])&&(a=b.dataset||b,(A=a.media)&&"image"!==A||(Q=ia(b,c,a,A)));for(b=0;b<n.length;b++)a=n[b],k(q[a],Y(a,ea[a]))}
function pb(a){t=r=0;v=1;if(M)if(M.onerror)yb(M);else{var b=M;setTimeout(function(){b&&M!==b&&(yb(b),b=null)},650);sb();Z()}N&&l(N,0);Ib(a);Bb(z-1);d(Wa,"error");ub(z);m(L);Z();a=P.title;var c=Y("description"),e=Y("button"),f=a||c||e;f&&(a&&(Oa.firstChild.nodeValue=a),c&&(Pa.firstChild.nodeValue=c),e&&(Qa.firstChild.nodeValue=e),k(Oa,a),k(Pa,c),k(Qa,e),g(N,"transform","all"===za?"":"none"));za||d(p,"menu",!0);l(N,Na&&f);l(Ra,G||1<z);l(Sa,G||z<B);Ua.firstChild.nodeValue=1<B?z+" / "+B:"";wa&&wa(z,D)}
;window.Spotlight={init:$a,theme:fb,fullscreen:bb,download:gb,autofit:V,next:ib,prev:hb,goto:Hb,close:ab,zoom:Gb,menu:Fb,show:function(a,b,c){C=a;b&&(E=b,va=b.onshow,wa=b.onchange,xa=b.onclose,c=c||b.index);nb(c)},play:W,addControl:U,removeControl:function(a){var b=q[a];b&&(Ma.removeChild(b),q[a]=null)}};}).call(this);
